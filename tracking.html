// Tambahkan atau perbarui fungsi-fungsi ini di dalam bagian <script>

// Fungsi untuk mengosongkan form sebelum tambah data baru
window.resetMisiForm = () => {
    document.getElementById('m-id').value = "";
    document.getElementById('m-nama').value = "";
    document.getElementById('m-durasi').value = "";
    // Reset kategori ke pilihan pertama
    document.querySelectorAll('#modal-misi .cat-item').forEach(i => i.classList.remove('selected'));
    document.querySelector('#modal-misi .cat-item[data-cat="ðŸ“š Belajar"]').classList.add('selected');
    openM('modal-misi');
};

window.resetHadiahForm = () => {
    document.getElementById('h-id').value = "";
    document.getElementById('h-nama').value = "";
    document.getElementById('h-target').value = "";
    openM('modal-hadiah');
};

// Pastikan tombol "+" memanggil fungsi reset di atas
document.getElementById('btn-add-misi-trigger').onclick = () => resetMisiForm();
document.getElementById('btn-add-reward-trigger').onclick = () => resetHadiahForm();

// Fungsi Edit tetap (tidak berubah)
window.prepEditMisi = (id, n, d, c) => { 
    if(userNow.r === 'admin'){ 
        document.getElementById('m-id').value = id; 
        document.getElementById('m-nama').value = n; 
        document.getElementById('m-durasi').value = d; 
        // Pilih kategori yang sesuai dengan data
        document.querySelectorAll('#modal-misi .cat-item').forEach(i => {
            i.classList.toggle('selected', i.dataset.cat === c);
        });
        openM('modal-misi'); 
    } 
};
